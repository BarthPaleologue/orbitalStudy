(()=>{"use strict";var t={d:(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};function n(t,n){return Math.floor(Math.random()*(n-t)+t)}function e(t,n){return t+n*Math.sqrt(-2*Math.log(Math.random()))*Math.cos(2*Math.PI*Math.random())}function o(t,n){return Math.sqrt(y*t/n)}t.d({},{lf:()=>l,vj:()=>c,G:()=>y,be:()=>h});var r=function(){function t(e,o,r,i,a,s){this.positionHistory=[],this.id=t.bodyCounter,t.bodyCounter++,this.mass=e,this.position=o,this.velocity=r;var c=Math.random()*Math.PI*2;this.position.rotateInPlaceBy(c),this.velocity.rotateInPlaceBy(c),null!=i&&(this.position.addInPlace(i.position),this.velocity.addInPlace(i.velocity)),this.parent=i,this.pointSize=a||10,this.color=s||"rgb(".concat(n(50,255),", ").concat(n(50,255),", ").concat(n(50,255),")")}return t.prototype.update=function(t){this.velocity.addInPlace(t),this.positionHistory.push(this.position.clone()),this.position.addInPlace(this.velocity)},t.prototype.draw=function(t,n,e){if(function(t){return t.x>=0&&t.y>=0&&t.x<=c&&t.y<=l}(this.position.subtract(e).add(h))){if(t.fillStyle=this.color,n.fillStyle=this.color,this.positionHistory.length>0){var o=this.positionHistory[this.positionHistory.length-1];n.beginPath(),n.arc(o.x-e.x+h.x,o.y-e.y+h.y,Math.min(this.pointSize/3,3),0,6.28),n.closePath()}t.beginPath(),t.arc(this.position.x-e.x+h.x,this.position.y-e.y+h.y,this.pointSize,0,6.28),t.closePath()}},t.bodyCounter=0,t}(),i=function(){function t(t,n){this.x=t,this.y=n}return t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.addInPlace=function(t){this.x+=t.x,this.y+=t.y},t.prototype.scaleInPlace=function(t){this.x*=t,this.y*=t},t.prototype.subtract=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.subtractInPlace=function(t){this.x-=t.x,this.y-=t.y},t.prototype.rotateInPlaceBy=function(t){var n=this.x*Math.cos(t)-this.y*Math.sin(t),e=this.x*Math.sin(t)+this.y*Math.cos(t);this.x=n,this.y=e},t.DistanceSquared=function(t,n){return Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)},t.Distance=function(n,e){return Math.sqrt(t.DistanceSquared(n,e))},t.Direction=function(t,n){var e=n.subtract(t);return e.normalizeInPlace(),e},t.prototype.normalizeInPlace=function(){var t=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));0!=t&&(this.x/=t,this.y/=t)},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),a=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],o=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,r,i=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}return a},c=window.innerWidth,l=window.innerHeight,h=new i(c/2,l/2),y=5e-4,u=document.getElementById("renderCanvas");u.width=c,u.height=l;var d=document.getElementById("traceCanvas");d.width=c,d.height=l;var f=u.getContext("2d"),p=d.getContext("2d"),v=[],w=2e6,x=new r(w,new i(0,0),new i(0,0),null,20,"yellow");v.push(x);for(var b=1;b<n(3,5);b++){var m=100*b*e(1,.1),M=o(w,m)*e(1,.1),P=2e4*e(1,.2),g=new r(P,new i(0,m),new i(M,0),x,7);v.push(g);for(var I=0;I<1;I++){var S=10*e(1,.1),q=o(P,S),D=new i(0,S),C=new i(q,0);v.push(new r(.001,D,C,g,4))}}var H=0;requestAnimationFrame((function t(){var n,e,o,r,c,l,h=[],u=Date.now();try{for(var d=a(v),w=d.next();!w.done;w=d.next()){var x=w.value,b=new i(0,0);try{for(var m=(o=void 0,a(v)),M=m.next();!M.done;M=m.next()){var P=M.value;if(P.id!=x.id){var g=i.DistanceSquared(x.position,P.position),I=i.Direction(x.position,P.position);I.scaleInPlace(y*P.mass/g),b.addInPlace(I)}}}catch(t){o={error:t}}finally{try{M&&!M.done&&(r=m.return)&&r.call(m)}finally{if(o)throw o.error}}h.push(b)}}catch(t){n={error:t}}finally{try{w&&!w.done&&(e=d.return)&&e.call(d)}finally{if(n)throw n.error}}console.log(Date.now()-u);try{for(var S=a(v.entries()),q=S.next();!q.done;q=S.next()){var D=s(q.value,2),C=D[0];(x=D[1]).update(h[C])}}catch(t){c={error:t}}finally{try{q&&!q.done&&(l=S.return)&&l.call(S)}finally{if(c)throw c.error}}!function(){var t,n;f.clearRect(0,0,f.canvas.width,f.canvas.height);try{for(var e=a(v),o=e.next();!o.done;o=e.next())o.value.draw(f,p,-1==H?new i(0,0):v[H].position),f.fill(),p.fill()}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}}(),requestAnimationFrame(t)})),document.addEventListener("keydown",(function(t){switch(t.key){case"0":H=0,p.clearRect(0,0,c,l);break;case"1":H=1,p.clearRect(0,0,c,l);break;case"2":H=2,p.clearRect(0,0,c,l);break;case".":H=-1,p.clearRect(0,0,c,l)}}))})();